<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD de Produtos</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <h1>Gerenciador de Produtos</h1>
    <form action="/adicionar" method="POST">
        <input type="text" name="nome" placeholder="Nome do Produto" required><br>
        <input type="number" step="0.01" name="preco" placeholder="Preco" required><br>
        <textarea name="descricao" placeholder="Descricao"></textarea>
        <button type="submit">Adicionar</button>
    </form>
    <h2>Lista de Produtos</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>nome</th>
                <th>Preço</th>
                <th>Descrição</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>

            <%#
            > produto.preco -> é o número original informado pelo usuário no formulário
            > .tolLocaleString(...) -> Função responsável pela formatação do valor informado em valor monetário
            > 'pt-BR' -> Garante o ponto(.) como separador de milhar e a vígula como separador decimal.
            > style: 'currency' -> formata como valor monetário.
            > currency: 'BRL' -> A moeda específica é o real brasileiro, o que faz com que R$ seja adicionado automaticamente
            %>


            <% produtos.forEach(produto => { %>
                <tr>
                    <td><%= produto.id %></td>
                    <td><%= produto.nome %></td>
                    <td><%= produto.preco.toLocaleString('pt-BR', {style:'currency', currency:'BRL'}) %></td>
                    <td><%= produto.descricao %></td>
                    <td class="actions">
                        <a href="/editar/<%= produto.id %>">Editar</a>
                        <form action="/Deletar/<%= produto.id %>" method="POST" style="display:inline;" onsubmit="return confirm('Tem certeza que deseja deletar?')">
                            <button type="submit" class="link-button">Deletar</button>
                        </form>
                    </td>
                </tr>
            <% }) %>
        </tbody>
    </table>
</body>
</html>